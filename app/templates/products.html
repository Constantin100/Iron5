{% extends 'base.html' %}

{% block title %}Продукты{% endblock %}

{% block content %}
<h2>Наши продукты</h2>
<p>Здесь вы можете увидеть список наших продуктов.</p>

<!-- Список продуктов -->
<div id="product-list">
    <ul id="products">
        <!-- Здесь будет динамически добавляться список продуктов -->
    </ul>
    <p id="no-products-message" style="display: none;">Продуктов из данной категории нет.</p>
</div>

<script>
    // Получаем категорию из URL
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');
    if (category) {
        loadProducts(category); // Загружаем продукты по категории
    }

    function loadProducts(category) {
        fetch(`/api/products?category=${category}`)
            .then(response => response.json())
            .then(data => {
                const productList = document.getElementById('products');
                const noProductsMessage = document.getElementById('no-products-message');
                productList.innerHTML = ''; // Очистить список

                if (data.length > 0) {
                    data.forEach(product => {
                        const li = document.createElement('li');
                        li.textContent = product.name; // Предполагается, что у продукта есть поле name
                        productList.appendChild(li);
                    });
                    noProductsMessage.style.display = 'none'; // Скрыть сообщение
                } else {
                    noProductsMessage.style.display = 'block'; // Показать сообщение
                }
            });
    }
</script>
{% endblock %}